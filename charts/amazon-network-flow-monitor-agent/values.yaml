image:
  override: '' # if defined, this value is used as the canonical image name ("{image_repo}{image_name}:{tag}")
  tag: v1.1.3-eksbuild.1  # this is the default image tag. It might be overwritten at runtime
  containerRegistry: '' # this gets overriden at runtime with the correct Docker Image Registry
  name: aws-network-sonar-agent # this determines the ecr folder to look for in the target ecr registry

clusterRole:
  name: aws-network-flow-monitor-agent-role

clusterRoleBinding:
  name: aws-network-flow-monitor-agent-role-binding

serviceAccount:
  name: aws-network-flow-monitor-agent-service-account
  # Annotations to add to the service account (e.g., for IAM roles for service accounts - IRSA)
  annotations: {}
  #   eks.amazonaws.com/role-arn: arn:aws:iam::123456789012:role/my-role-name
  #   custom-annotation: custom-value

daemonSet:
  name: aws-network-flow-monitor-agent

# Common labels to add to all network-flow-monitor-agent resources. Evaluated as a template.
additionalLabels: {}

# Useful parameters that provide flexibility to customers
podLabels: {}
podAnnotations: {}
tolerations:
- operator: Exists # by default install everywhere, tolerate every taint

# allow user to change the internal addon name labels
nameOverride: ""

env:
  RUST_LOG: info
  OPEN_METRICS: "off"
  OPEN_METRICS_PORT: "9109"
  OPEN_METRICS_ADDRESS: "0.0.0.0"
  # DISABLE_PUBLISHING: "true"

# CA Certificate Bundle configuration
# Allows mounting a custom CA certificate bundle from a Kubernetes Secret
caCerts:
  # Enable CA certificate bundle mounting
  enabled: false
  # Name of the Secret containing the CA certificate bundle
  secretName: "ca-cert-bundle"
  # Key in the Secret that contains the CA certificate bundle (optional)
  # If not specified, all keys in the secret will be mounted
  secretKey: "ca-bundle.crt"
  # Mount path for the CA certificate bundle
  mountPath: "/etc/ssl/certs"
  # File name for the CA certificate bundle
  fileName: "ca-bundle.crt"

resources:
  limits:
    cpu: 500m
    memory: 200Mi
  requests:
    cpu: 50m
    memory: 100Mi

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
          # Don't schedule on special compute types
        - key: eks.amazonaws.com/compute-type
          operator: NotIn
          values:
            - fargate
            - hybrid
          # Only schedule on amd64 nodes
        - key: kubernetes.io/arch
          operator: In
          values:
            - amd64
            - arm64

priorityClassName: ""
